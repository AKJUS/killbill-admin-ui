<div class="tab-pane fade in active" id="CatalogConfig">
  <hr/>
  <table id="existing-plans-for-tenants" class="table table-condensed">
    <thead>
    <tr>
      <th>Plan Id</th>
      <th>Product</th>
      <th>Billing Period</th>
      <th>
        <select id="select_currencies" class="selectpicker show-menu-arrow">
          <% @currencies.each_with_index do |c, i| %>
              <option><%= c %></option>
          <% end %>
        </select>
      </th>
      <th>Trial</th>
    </tr>
    </thead>
    <tbody>
    <% @existing_simple_plans.each do |p| %>
        <tr>
          <td><%= p.plan_id %></td>
          <td><%= p.product_name %></td>
          <td><%= p.billing_period %></td>
          <td>
            <% @currencies.each do |c| %>
                <span class="plan_currency_<%= c %>"><%= p.prices[c] %></span>
            <% end %>
          </td>
          <td><%= p.trial_length != 0 ? "#{p.trial_length} #{p.trial_time_unit}" : "#{p.trial_time_unit}" %></td>
        </tr>
    <% end %>
    </tbody>
  </table>
  <hr/>
  <%= render :partial => 'form_simple_plan' %>
  <hr/>
  <%= form_tag({:action => :upload_catalog}, :method => 'post', :multipart => true, :class => 'form-horizontal') do %>
      <%= hidden_field_tag(:id, @tenant.id) %>

      <div class="form-group">
        <div class="col-sm-10">
          <%= file_field_tag 'catalog', :class => 'form-control' %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-10">
          <%= submit_tag 'Upload', :class => 'btn btn-default' %>
        </div>
      </div>
  <% end %>
</div>

<%= javascript_tag do %>


function displayAmountsForCurrency() {
    $('[class^="plan_currency_"]').hide();
    $("[class^=plan_currency_" + $("#select_currencies option").filter(function(idx, value) { return value.selected; })[0].value + "]").show();
}

$(document).ready(function() {
    displayAmountsForCurrency();
    $("#select_currencies").change(function() {
        displayAmountsForCurrency();
    });
});
<% end %>

